-- DROP TABLE T_SERVICEPROVIDER ;

CREATE TABLE T_SERVICEPROVIDER
(
  SERVICEPROVIDER_KEY    INTEGER                NOT NULL,
  SERVICEPROVIDER_NAME   VARCHAR(128)     NOT NULL,
  APPLICATION_USER  VARCHAR(128)     NOT NULL
) WITH (OIDS=TRUE)
;


CREATE UNIQUE INDEX U_SERVICEPROVIDER ON T_SERVICEPROVIDER (APPLICATION_USER, SERVICEPROVIDER_NAME) ;


-- DROP TABLE T_IDENTITY_TO_SP ;

CREATE TABLE T_IDENTITY_TO_SP
(
  IDENTITY_KEY         INTEGER                  NOT NULL,
  SERVICEPROVIDER_KEY  INTEGER                  NOT NULL
) WITH (OIDS=TRUE)
;


ALTER TABLE T_SERVICEPROVIDER ADD CONSTRAINT PK_T_SERVICEPROVIDER PRIMARY KEY (SERVICEPROVIDER_KEY) ;

ALTER TABLE T_IDENTITY_TO_SP ADD CONSTRAINT FK_IDENTITY_TO_SP FOREIGN KEY (IDENTITY_KEY) 
    REFERENCES T_IDENTITY (IDENTITY_KEY);

ALTER TABLE T_IDENTITY_TO_SP ADD CONSTRAINT FK2_IDENTITY_TO_SP FOREIGN KEY (SERVICEPROVIDER_KEY) 
    REFERENCES T_SERVICEPROVIDER (SERVICEPROVIDER_KEY);

